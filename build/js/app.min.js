(function () {
'use strict';

// jshint esversion: 6
const MASHAPE_KEY = 'AyBmxPBKYUmshcuDOEgra2staJv9p1Tm8cgjsnsk5j9j5dONbK';

function getSearchResults(userQuery) {
  let ajaxSettings = {
    url: 'https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/food/site/search',
    data: {
      query: userQuery
    },
    dataType: 'json',
    headers: {
      'X-Mashape-Key': MASHAPE_KEY,
      Accept: 'application/json'
    }
  };
  return $.ajax(ajaxSettings);
}

function getRecipeDetails(id) {
  let ajaxSettings = {
    url: 'https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/'+id+'/information',
    data: {
      includeNutrition: false
    },
    dataType: 'json',
    headers: {
      'X-Mashape-Key': MASHAPE_KEY,
      Accept: 'application/json'
    }
  };
  return $.ajax(ajaxSettings);
}

// function getSearchResultsByIngredient(myIngredients, numResults=5) {
//   let ajaxSettings = {
//     url: 'https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/findByIngredients',
//     data: {
//       fillIngredients: false,
//       ingredients: myIngredients,
//       limitLicense: false,
//       number: numResults,
//       ranking: 1
//     },
//     dataType: 'json',
//     headers: {
//       'X-Mashape-Key': MASHAPE_KEY,
//       Accept: 'application/json'
//     }
//   };
//   return $.ajax(ajaxSettings);
// }

// jshint esversion:6
const CLIENT_ID = 'myj4y8uy5mlsg9s';
const REDIRECT_URI$1 = 'http://localhost/spoon-n-drop/build/';
const STORAGE_PATH = '/my-recipes.json';

function OAuth(){
  let url = 'https://www.dropbox.com/oauth2/authorize?'+
  'response_type=token&'+
  'client_id='+CLIENT_ID+'&'+
  'redirect_uri='+REDIRECT_URI$1;
  window.location.replace(url);
}
/*GET and param urls used to avoid CORS pre-flight*/
function getMyRecipes() {
  let ajaxSettings = {
    url: 'https://content.dropboxapi.com/2/files/download',
    method: 'GET',
    dataType: 'json',
    data: {
      authorization: 'Bearer '+ window.sessionStorage.getItem('accessToken'),
      arg: JSON.stringify({path: STORAGE_PATH}),
      reject_cors_preflight: true
    }
  };
  return $.ajax(ajaxSettings);
}

function deleteFileHelper() {
  let ajaxSettings = {
    url: 'https://api.dropboxapi.com/2/files/delete',
    method: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    data: JSON.stringify({path: STORAGE_PATH}),
    headers : {
      Authorization: 'Bearer '+window.sessionStorage.getItem('accessToken')
    }
  };
  return $.ajax(ajaxSettings);
}

function postMyRecipes(state) {
  let ajaxSettings = {
    url: 'https://content.dropboxapi.com/2/files/upload',
    method: 'POST',
    contentType: 'application/octet-stream',
    data: JSON.stringify(state.myRecipes),
    headers: {
      Authorization: 'Bearer '+window.sessionStorage.getItem('accessToken'),
      'Dropbox-API-Arg': JSON.stringify({path: STORAGE_PATH})
    }
  };
  return $.ajax(ajaxSettings);
}

// jshint esversion:6

function renderPage() {
  $('main').find('.viewable').addClass('hide');
  $('main').find('.viewable').removeClass('viewable');
  $('#new-recipe-page').removeClass('hide');
  $('#new-recipe-page').addClass('viewable');
}

function renderNewListItem(element, keyPressed) {
  if(keyPressed === 'Enter') {
    element.after('<li><input type="text" placeholder="new item"></li>');
  }
}

function addRecipe(state) {
  let title = $('#recipe-title').val();
  let time = $('#ready-in-mins').val();
  let ingredients = [];
  $('#ingredients').find('input').each(
    (index, element) => ingredients.push($(element).val())
  );

  let steps = [];
  $('#steps').find('input').each(
    (index, element) => steps.push($(element).val())
  );

  state.myRecipes.push({
    title: title,
    readyInMinutes: time,
    listofIngredients: ingredients,
    instructions: steps
  });
}

// jshint esversion:6
function makeResultsList(resultObj, state) {
  let recipeId = '';
  $.each(resultObj.Recipes, function(ind, obj) {
    recipeId = obj.link.split('-').pop();

    state.resultList.push({
      title: obj.name,
      imgUrl: obj.image,
      id: recipeId
    });
  });
}

function renderResultsList(state){
  let previewHtml = '';
  $.each(state.resultList, function(ind, obj) {
    previewHtml += '<li data-recipeid="'+obj.id+'"><a>'+
    '<img src="'+obj.imgUrl+'" alt="'+obj.title+'">'+
    '<span>'+obj.title+'</span>'+
    '<form><input type="submit"></form>'+
    '</li></a>';
  });
  $('#search-results').html(previewHtml);
}

function simplifyRecipeDetails(recipeObj) {
  /*Refer to 'get-recipe-info-sample-response.json' for recipeObj's complete structure*/
  let ingredients = [];
  $.each(recipeObj.extendedIngredients, function(ind, obj) {
    ingredients.push({
      name: obj.name,
      amount: obj.amount + obj.unitLong
    });
  });
  let steps = [];
  if (typeof recipeObj.analyzedInstructions[0] !== 'undefined') {
    $.each(recipeObj.analyzedInstructions[0].steps, function(ind, obj) {
      steps.push(obj.step);
    });
  }
  return {
    title: recipeObj.title,
    time: recipeObj.readyInMinutes,
    listofIngredients: ingredients,
    instructions: steps
  };
}

function renderRecipeDetails(simpleRecipeObj, state) {
  state.previousHtml = $('main').html();
  let recipeInfoHtml ='<span><h1>'+
    simpleRecipeObj.title+'</h1>'+
    '<h2>'+simpleRecipeObj.time+'minutes</h2></span><ul>';
  $.each(simpleRecipeObj.listofIngredients, function(ind, obj) {
    recipeInfoHtml += '<li>'+obj.amount+obj.name+'</li>';
  });
  recipeInfoHtml += '</ul><ol>';
  $.each(simpleRecipeObj.instructions, function(ind,val) {
    recipeInfoHtml += '<li>'+val+'</li>';
  });
  recipeInfoHtml += '</ol>';
  $('main').html(recipeInfoHtml);
}

//jshint esversion: 6

const REDIRECT_URI = 'http://localhost/spoon-n-drop/build/';
function initAppState() {
  return {
    resultList: [],
    currentView: 'search',
    previousHtml: '',
    myRecipes: [], //list of recipe objs
    loggedIn: false,
    accessToken: ''
  };
}


$(function main() {
  let appState = initAppState();
  let token = window.sessionStorage.getItem('accessToken');

  if(token !== 'undefined' && token !== null) {
    appState.loggedIn = true;
  }

  else {
    let redirectResponse = window.location.href.split('#')[1];
    if(typeof redirectResponse != 'undefined') {
      window.sessionStorage.setItem('accessToken', redirectResponse.split('&')[0].split('=')[1]);
      window.location.replace(REDIRECT_URI);
      appState.loggedIn = true;
    }
  }

  $('#search-form').on('submit', function(event) {
    event.preventDefault();
    let query = $(this).find('#search-bar').val();
    getSearchResults(query).done(function (data) {
      makeResultsList(data,appState);
      renderResultsList(appState);
    });
  });

  $('#search-results').on('click','li',function() {
    let xhr = getRecipeDetails($(this).data('recipeid'));
    xhr.done(
      data => renderRecipeDetails(simplifyRecipeDetails(data), appState)
    );
  });

  $('#login').on('click', function() {
    if(!appState.loggedIn) {OAuth();}
  });

  $('#my-recipes').on('click', function() {
    if(appState.loggedIn) {
      getMyRecipes().then(
        data => appState.myRecipes = data,
        jqxhr => console.log(jqxhr.responseText)
      );
    }
  });

  $('#search-for-recipes').on('click', function () {
  });

  $('#create-recipe').on('click', () => renderPage() );
  $('.create-list').on('keypress', 'li', function (event) {
    renderNewListItem($(this), event.key);
  });
  $('#new-recipe-page').find('form').on('click', 'button', function(event) {
    event.preventDefault();
    addRecipe(appState);
    deleteFileHelper().always(
      data => postMyRecipes(appState).then(
        data => console.log('Success'),
        jqxhr => console.log(jqxhr.responseText)
      )
    );
  });
});

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9hcGkvc3Bvb25hY3VsYXIuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2FwaS9kcm9wYm94LmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9wYWdlLXZpZXdzL2NyZWF0ZS5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL21vZHVsZXMvcGFnZS12aWV3cy9zZWFyY2guanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8ganNoaW50IGVzdmVyc2lvbjogNlxuY29uc3QgTUFTSEFQRV9LRVkgPSAnQXlCbXhQQktZVW1zaGN1RE9FZ3JhMnN0YUp2OXAxVG04Y2dqc25zazVqOWo1ZE9OYksnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VhcmNoUmVzdWx0cyh1c2VyUXVlcnkpIHtcbiAgbGV0IGFqYXhTZXR0aW5ncyA9IHtcbiAgICB1cmw6ICdodHRwczovL3Nwb29uYWN1bGFyLXJlY2lwZS1mb29kLW51dHJpdGlvbi12MS5wLm1hc2hhcGUuY29tL2Zvb2Qvc2l0ZS9zZWFyY2gnLFxuICAgIGRhdGE6IHtcbiAgICAgIHF1ZXJ5OiB1c2VyUXVlcnlcbiAgICB9LFxuICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ1gtTWFzaGFwZS1LZXknOiBNQVNIQVBFX0tFWSxcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICB9O1xuICByZXR1cm4gJC5hamF4KGFqYXhTZXR0aW5ncyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWNpcGVEZXRhaWxzKGlkKSB7XG4gIGxldCBhamF4U2V0dGluZ3MgPSB7XG4gICAgdXJsOiAnaHR0cHM6Ly9zcG9vbmFjdWxhci1yZWNpcGUtZm9vZC1udXRyaXRpb24tdjEucC5tYXNoYXBlLmNvbS9yZWNpcGVzLycraWQrJy9pbmZvcm1hdGlvbicsXG4gICAgZGF0YToge1xuICAgICAgaW5jbHVkZU51dHJpdGlvbjogZmFsc2VcbiAgICB9LFxuICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ1gtTWFzaGFwZS1LZXknOiBNQVNIQVBFX0tFWSxcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICB9O1xuICByZXR1cm4gJC5hamF4KGFqYXhTZXR0aW5ncyk7XG59XG5cbi8vIGZ1bmN0aW9uIGdldFNlYXJjaFJlc3VsdHNCeUluZ3JlZGllbnQobXlJbmdyZWRpZW50cywgbnVtUmVzdWx0cz01KSB7XG4vLyAgIGxldCBhamF4U2V0dGluZ3MgPSB7XG4vLyAgICAgdXJsOiAnaHR0cHM6Ly9zcG9vbmFjdWxhci1yZWNpcGUtZm9vZC1udXRyaXRpb24tdjEucC5tYXNoYXBlLmNvbS9yZWNpcGVzL2ZpbmRCeUluZ3JlZGllbnRzJyxcbi8vICAgICBkYXRhOiB7XG4vLyAgICAgICBmaWxsSW5ncmVkaWVudHM6IGZhbHNlLFxuLy8gICAgICAgaW5ncmVkaWVudHM6IG15SW5ncmVkaWVudHMsXG4vLyAgICAgICBsaW1pdExpY2Vuc2U6IGZhbHNlLFxuLy8gICAgICAgbnVtYmVyOiBudW1SZXN1bHRzLFxuLy8gICAgICAgcmFua2luZzogMVxuLy8gICAgIH0sXG4vLyAgICAgZGF0YVR5cGU6ICdqc29uJyxcbi8vICAgICBoZWFkZXJzOiB7XG4vLyAgICAgICAnWC1NYXNoYXBlLUtleSc6IE1BU0hBUEVfS0VZLFxuLy8gICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbi8vICAgICB9XG4vLyAgIH07XG4vLyAgIHJldHVybiAkLmFqYXgoYWpheFNldHRpbmdzKTtcbi8vIH1cbiIsIi8vIGpzaGludCBlc3ZlcnNpb246NlxuY29uc3QgQ0xJRU5UX0lEID0gJ215ajR5OHV5NW1sc2c5cyc7XG5jb25zdCBSRURJUkVDVF9VUkkgPSAnaHR0cDovL2xvY2FsaG9zdC9zcG9vbi1uLWRyb3AvYnVpbGQvJztcbmNvbnN0IFNUT1JBR0VfUEFUSCA9ICcvbXktcmVjaXBlcy5qc29uJztcblxuZXhwb3J0IGZ1bmN0aW9uIE9BdXRoKCl7XG4gIGxldCB1cmwgPSAnaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vb2F1dGgyL2F1dGhvcml6ZT8nK1xuICAncmVzcG9uc2VfdHlwZT10b2tlbiYnK1xuICAnY2xpZW50X2lkPScrQ0xJRU5UX0lEKycmJytcbiAgJ3JlZGlyZWN0X3VyaT0nK1JFRElSRUNUX1VSSTtcbiAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UodXJsKTtcbn1cbi8qR0VUIGFuZCBwYXJhbSB1cmxzIHVzZWQgdG8gYXZvaWQgQ09SUyBwcmUtZmxpZ2h0Ki9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNeVJlY2lwZXMoKSB7XG4gIGxldCBhamF4U2V0dGluZ3MgPSB7XG4gICAgdXJsOiAnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICBkYXRhOiB7XG4gICAgICBhdXRob3JpemF0aW9uOiAnQmVhcmVyICcrIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpLFxuICAgICAgYXJnOiBKU09OLnN0cmluZ2lmeSh7cGF0aDogU1RPUkFHRV9QQVRIfSksXG4gICAgICByZWplY3RfY29yc19wcmVmbGlnaHQ6IHRydWVcbiAgICB9XG4gIH07XG4gIHJldHVybiAkLmFqYXgoYWpheFNldHRpbmdzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUZpbGVIZWxwZXIoKSB7XG4gIGxldCBhamF4U2V0dGluZ3MgPSB7XG4gICAgdXJsOiAnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kZWxldGUnLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cGF0aDogU1RPUkFHRV9QQVRIfSksXG4gICAgaGVhZGVycyA6IHtcbiAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyt3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuICQuYWpheChhamF4U2V0dGluZ3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zdE15UmVjaXBlcyhzdGF0ZSkge1xuICBsZXQgYWpheFNldHRpbmdzID0ge1xuICAgIHVybDogJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlLm15UmVjaXBlcyksXG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnK3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpLFxuICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHtwYXRoOiBTVE9SQUdFX1BBVEh9KVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuICQuYWpheChhamF4U2V0dGluZ3MpO1xufVxuIiwiLy8ganNoaW50IGVzdmVyc2lvbjo2XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJQYWdlKCkge1xuICAkKCdtYWluJykuZmluZCgnLnZpZXdhYmxlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgJCgnbWFpbicpLmZpbmQoJy52aWV3YWJsZScpLnJlbW92ZUNsYXNzKCd2aWV3YWJsZScpO1xuICAkKCcjbmV3LXJlY2lwZS1wYWdlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgJCgnI25ldy1yZWNpcGUtcGFnZScpLmFkZENsYXNzKCd2aWV3YWJsZScpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTmV3TGlzdEl0ZW0oZWxlbWVudCwga2V5UHJlc3NlZCkge1xuICBpZihrZXlQcmVzc2VkID09PSAnRW50ZXInKSB7XG4gICAgZWxlbWVudC5hZnRlcignPGxpPjxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwibmV3IGl0ZW1cIj48L2xpPicpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRSZWNpcGUoc3RhdGUpIHtcbiAgbGV0IHRpdGxlID0gJCgnI3JlY2lwZS10aXRsZScpLnZhbCgpO1xuICBsZXQgdGltZSA9ICQoJyNyZWFkeS1pbi1taW5zJykudmFsKCk7XG4gIGxldCBpbmdyZWRpZW50cyA9IFtdO1xuICAkKCcjaW5ncmVkaWVudHMnKS5maW5kKCdpbnB1dCcpLmVhY2goXG4gICAgKGluZGV4LCBlbGVtZW50KSA9PiBpbmdyZWRpZW50cy5wdXNoKCQoZWxlbWVudCkudmFsKCkpXG4gICk7XG5cbiAgbGV0IHN0ZXBzID0gW107XG4gICQoJyNzdGVwcycpLmZpbmQoJ2lucHV0JykuZWFjaChcbiAgICAoaW5kZXgsIGVsZW1lbnQpID0+IHN0ZXBzLnB1c2goJChlbGVtZW50KS52YWwoKSlcbiAgKTtcblxuICBzdGF0ZS5teVJlY2lwZXMucHVzaCh7XG4gICAgdGl0bGU6IHRpdGxlLFxuICAgIHJlYWR5SW5NaW51dGVzOiB0aW1lLFxuICAgIGxpc3RvZkluZ3JlZGllbnRzOiBpbmdyZWRpZW50cyxcbiAgICBpbnN0cnVjdGlvbnM6IHN0ZXBzXG4gIH0pO1xufVxuIiwiLy8ganNoaW50IGVzdmVyc2lvbjo2XG5leHBvcnQgZnVuY3Rpb24gbWFrZVJlc3VsdHNMaXN0KHJlc3VsdE9iaiwgc3RhdGUpIHtcbiAgbGV0IHJlY2lwZUlkID0gJyc7XG4gICQuZWFjaChyZXN1bHRPYmouUmVjaXBlcywgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICByZWNpcGVJZCA9IG9iai5saW5rLnNwbGl0KCctJykucG9wKCk7XG5cbiAgICBzdGF0ZS5yZXN1bHRMaXN0LnB1c2goe1xuICAgICAgdGl0bGU6IG9iai5uYW1lLFxuICAgICAgaW1nVXJsOiBvYmouaW1hZ2UsXG4gICAgICBpZDogcmVjaXBlSWRcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJSZXN1bHRzTGlzdChzdGF0ZSl7XG4gIGxldCBwcmV2aWV3SHRtbCA9ICcnO1xuICAkLmVhY2goc3RhdGUucmVzdWx0TGlzdCwgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICBwcmV2aWV3SHRtbCArPSAnPGxpIGRhdGEtcmVjaXBlaWQ9XCInK29iai5pZCsnXCI+PGE+JytcbiAgICAnPGltZyBzcmM9XCInK29iai5pbWdVcmwrJ1wiIGFsdD1cIicrb2JqLnRpdGxlKydcIj4nK1xuICAgICc8c3Bhbj4nK29iai50aXRsZSsnPC9zcGFuPicrXG4gICAgJzxmb3JtPjxpbnB1dCB0eXBlPVwic3VibWl0XCI+PC9mb3JtPicrXG4gICAgJzwvbGk+PC9hPic7XG4gIH0pO1xuICAkKCcjc2VhcmNoLXJlc3VsdHMnKS5odG1sKHByZXZpZXdIdG1sKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsaWZ5UmVjaXBlRGV0YWlscyhyZWNpcGVPYmopIHtcbiAgLypSZWZlciB0byAnZ2V0LXJlY2lwZS1pbmZvLXNhbXBsZS1yZXNwb25zZS5qc29uJyBmb3IgcmVjaXBlT2JqJ3MgY29tcGxldGUgc3RydWN0dXJlKi9cbiAgbGV0IGluZ3JlZGllbnRzID0gW107XG4gICQuZWFjaChyZWNpcGVPYmouZXh0ZW5kZWRJbmdyZWRpZW50cywgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICBpbmdyZWRpZW50cy5wdXNoKHtcbiAgICAgIG5hbWU6IG9iai5uYW1lLFxuICAgICAgYW1vdW50OiBvYmouYW1vdW50ICsgb2JqLnVuaXRMb25nXG4gICAgfSk7XG4gIH0pO1xuICBsZXQgc3RlcHMgPSBbXTtcbiAgaWYgKHR5cGVvZiByZWNpcGVPYmouYW5hbHl6ZWRJbnN0cnVjdGlvbnNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgJC5lYWNoKHJlY2lwZU9iai5hbmFseXplZEluc3RydWN0aW9uc1swXS5zdGVwcywgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICAgIHN0ZXBzLnB1c2gob2JqLnN0ZXApO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IHJlY2lwZU9iai50aXRsZSxcbiAgICB0aW1lOiByZWNpcGVPYmoucmVhZHlJbk1pbnV0ZXMsXG4gICAgbGlzdG9mSW5ncmVkaWVudHM6IGluZ3JlZGllbnRzLFxuICAgIGluc3RydWN0aW9uczogc3RlcHNcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclJlY2lwZURldGFpbHMoc2ltcGxlUmVjaXBlT2JqLCBzdGF0ZSkge1xuICBzdGF0ZS5wcmV2aW91c0h0bWwgPSAkKCdtYWluJykuaHRtbCgpO1xuICBsZXQgcmVjaXBlSW5mb0h0bWwgPSc8c3Bhbj48aDE+JytcbiAgICBzaW1wbGVSZWNpcGVPYmoudGl0bGUrJzwvaDE+JytcbiAgICAnPGgyPicrc2ltcGxlUmVjaXBlT2JqLnRpbWUrJ21pbnV0ZXM8L2gyPjwvc3Bhbj48dWw+JztcbiAgJC5lYWNoKHNpbXBsZVJlY2lwZU9iai5saXN0b2ZJbmdyZWRpZW50cywgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICByZWNpcGVJbmZvSHRtbCArPSAnPGxpPicrb2JqLmFtb3VudCtvYmoubmFtZSsnPC9saT4nO1xuICB9KTtcbiAgcmVjaXBlSW5mb0h0bWwgKz0gJzwvdWw+PG9sPic7XG4gICQuZWFjaChzaW1wbGVSZWNpcGVPYmouaW5zdHJ1Y3Rpb25zLCBmdW5jdGlvbihpbmQsdmFsKSB7XG4gICAgcmVjaXBlSW5mb0h0bWwgKz0gJzxsaT4nK3ZhbCsnPC9saT4nO1xuICB9KTtcbiAgcmVjaXBlSW5mb0h0bWwgKz0gJzwvb2w+JztcbiAgJCgnbWFpbicpLmh0bWwocmVjaXBlSW5mb0h0bWwpO1xufVxuIiwiLy9qc2hpbnQgZXN2ZXJzaW9uOiA2XG5cbmltcG9ydCAqIGFzIHJlY2lwZSBmcm9tICcuL21vZHVsZXMvYXBpL3Nwb29uYWN1bGFyJztcbmltcG9ydCAqIGFzIGRyb3Bib3ggZnJvbSAnLi9tb2R1bGVzL2FwaS9kcm9wYm94JztcbmltcG9ydCAqIGFzIGNyZWF0ZSBmcm9tICcuL21vZHVsZXMvcGFnZS12aWV3cy9jcmVhdGUnO1xuaW1wb3J0ICogYXMgc2VhcmNoIGZyb20gJy4vbW9kdWxlcy9wYWdlLXZpZXdzL3NlYXJjaCc7XG5cbmNvbnN0IFJFRElSRUNUX1VSSSA9ICdodHRwOi8vbG9jYWxob3N0L3Nwb29uLW4tZHJvcC9idWlsZC8nO1xuZnVuY3Rpb24gaW5pdEFwcFN0YXRlKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3VsdExpc3Q6IFtdLFxuICAgIGN1cnJlbnRWaWV3OiAnc2VhcmNoJyxcbiAgICBwcmV2aW91c0h0bWw6ICcnLFxuICAgIG15UmVjaXBlczogW10sIC8vbGlzdCBvZiByZWNpcGUgb2Jqc1xuICAgIGxvZ2dlZEluOiBmYWxzZSxcbiAgICBhY2Nlc3NUb2tlbjogJydcbiAgfTtcbn1cblxuXG4kKGZ1bmN0aW9uIG1haW4oKSB7XG4gIGxldCBhcHBTdGF0ZSA9IGluaXRBcHBTdGF0ZSgpO1xuICBsZXQgdG9rZW4gPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKTtcblxuICBpZih0b2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdG9rZW4gIT09IG51bGwpIHtcbiAgICBhcHBTdGF0ZS5sb2dnZWRJbiA9IHRydWU7XG4gIH1cblxuICBlbHNlIHtcbiAgICBsZXQgcmVkaXJlY3RSZXNwb25zZSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMV07XG4gICAgaWYodHlwZW9mIHJlZGlyZWN0UmVzcG9uc2UgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NUb2tlbicsIHJlZGlyZWN0UmVzcG9uc2Uuc3BsaXQoJyYnKVswXS5zcGxpdCgnPScpWzFdKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFJFRElSRUNUX1VSSSk7XG4gICAgICBhcHBTdGF0ZS5sb2dnZWRJbiA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgJCgnI3NlYXJjaC1mb3JtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgcXVlcnkgPSAkKHRoaXMpLmZpbmQoJyNzZWFyY2gtYmFyJykudmFsKCk7XG4gICAgcmVjaXBlLmdldFNlYXJjaFJlc3VsdHMocXVlcnkpLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHNlYXJjaC5tYWtlUmVzdWx0c0xpc3QoZGF0YSxhcHBTdGF0ZSk7XG4gICAgICBzZWFyY2gucmVuZGVyUmVzdWx0c0xpc3QoYXBwU3RhdGUpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcjc2VhcmNoLXJlc3VsdHMnKS5vbignY2xpY2snLCdsaScsZnVuY3Rpb24oKSB7XG4gICAgbGV0IHhociA9IHJlY2lwZS5nZXRSZWNpcGVEZXRhaWxzKCQodGhpcykuZGF0YSgncmVjaXBlaWQnKSk7XG4gICAgeGhyLmRvbmUoXG4gICAgICBkYXRhID0+IHNlYXJjaC5yZW5kZXJSZWNpcGVEZXRhaWxzKHNlYXJjaC5zaW1wbGlmeVJlY2lwZURldGFpbHMoZGF0YSksIGFwcFN0YXRlKVxuICAgICk7XG4gIH0pO1xuXG4gICQoJyNsb2dpbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGlmKCFhcHBTdGF0ZS5sb2dnZWRJbikge2Ryb3Bib3guT0F1dGgoKTt9XG4gIH0pO1xuXG4gICQoJyNteS1yZWNpcGVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgaWYoYXBwU3RhdGUubG9nZ2VkSW4pIHtcbiAgICAgIGRyb3Bib3guZ2V0TXlSZWNpcGVzKCkudGhlbihcbiAgICAgICAgZGF0YSA9PiBhcHBTdGF0ZS5teVJlY2lwZXMgPSBkYXRhLFxuICAgICAgICBqcXhociA9PiBjb25zb2xlLmxvZyhqcXhoci5yZXNwb25zZVRleHQpXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgJCgnI3NlYXJjaC1mb3ItcmVjaXBlcycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgfSk7XG5cbiAgJCgnI2NyZWF0ZS1yZWNpcGUnKS5vbignY2xpY2snLCAoKSA9PiBjcmVhdGUucmVuZGVyUGFnZSgpICk7XG4gICQoJy5jcmVhdGUtbGlzdCcpLm9uKCdrZXlwcmVzcycsICdsaScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNyZWF0ZS5yZW5kZXJOZXdMaXN0SXRlbSgkKHRoaXMpLCBldmVudC5rZXkpO1xuICB9KTtcbiAgJCgnI25ldy1yZWNpcGUtcGFnZScpLmZpbmQoJ2Zvcm0nKS5vbignY2xpY2snLCAnYnV0dG9uJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNyZWF0ZS5hZGRSZWNpcGUoYXBwU3RhdGUpO1xuICAgIGRyb3Bib3guZGVsZXRlRmlsZUhlbHBlcigpLmFsd2F5cyhcbiAgICAgIGRhdGEgPT4gZHJvcGJveC5wb3N0TXlSZWNpcGVzKGFwcFN0YXRlKS50aGVuKFxuICAgICAgICBkYXRhID0+IGNvbnNvbGUubG9nKCdTdWNjZXNzJyksXG4gICAgICAgIGpxeGhyID0+IGNvbnNvbGUubG9nKGpxeGhyLnJlc3BvbnNlVGV4dClcbiAgICAgIClcbiAgICApO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbIlJFRElSRUNUX1VSSSIsInJlY2lwZS5nZXRTZWFyY2hSZXN1bHRzIiwic2VhcmNoLm1ha2VSZXN1bHRzTGlzdCIsInNlYXJjaC5yZW5kZXJSZXN1bHRzTGlzdCIsInJlY2lwZS5nZXRSZWNpcGVEZXRhaWxzIiwic2VhcmNoLnJlbmRlclJlY2lwZURldGFpbHMiLCJzZWFyY2guc2ltcGxpZnlSZWNpcGVEZXRhaWxzIiwiZHJvcGJveC5PQXV0aCIsImRyb3Bib3guZ2V0TXlSZWNpcGVzIiwiY3JlYXRlLnJlbmRlclBhZ2UiLCJjcmVhdGUucmVuZGVyTmV3TGlzdEl0ZW0iLCJjcmVhdGUuYWRkUmVjaXBlIiwiZHJvcGJveC5kZWxldGVGaWxlSGVscGVyIiwiZHJvcGJveC5wb3N0TXlSZWNpcGVzIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBLE1BQU0sV0FBVyxHQUFHLG9EQUFvRCxDQUFDOztBQUV6RSxBQUFPLFNBQVMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFO0VBQzFDLElBQUksWUFBWSxHQUFHO0lBQ2pCLEdBQUcsRUFBRSw2RUFBNkU7SUFDbEYsSUFBSSxFQUFFO01BQ0osS0FBSyxFQUFFLFNBQVM7S0FDakI7SUFDRCxRQUFRLEVBQUUsTUFBTTtJQUNoQixPQUFPLEVBQUU7TUFDUCxlQUFlLEVBQUUsV0FBVztNQUM1QixNQUFNLEVBQUUsa0JBQWtCO0tBQzNCO0dBQ0YsQ0FBQztFQUNGLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztDQUM3Qjs7QUFFRCxBQUFPLFNBQVMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFO0VBQ25DLElBQUksWUFBWSxHQUFHO0lBQ2pCLEdBQUcsRUFBRSxxRUFBcUUsQ0FBQyxFQUFFLENBQUMsY0FBYztJQUM1RixJQUFJLEVBQUU7TUFDSixnQkFBZ0IsRUFBRSxLQUFLO0tBQ3hCO0lBQ0QsUUFBUSxFQUFFLE1BQU07SUFDaEIsT0FBTyxFQUFFO01BQ1AsZUFBZSxFQUFFLFdBQVc7TUFDNUIsTUFBTSxFQUFFLGtCQUFrQjtLQUMzQjtHQUNGLENBQUM7RUFDRixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7Q0FDN0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFtQkc7O0FDbERKO0FBQ0EsTUFBTSxTQUFTLEdBQUcsaUJBQWlCLENBQUM7QUFDcEMsTUFBTUEsY0FBWSxHQUFHLHNDQUFzQyxDQUFDO0FBQzVELE1BQU0sWUFBWSxHQUFHLGtCQUFrQixDQUFDOztBQUV4QyxBQUFPLFNBQVMsS0FBSyxFQUFFO0VBQ3JCLElBQUks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
