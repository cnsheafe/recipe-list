(function () {
'use strict';

// jshint esversion: 6
// See Spoonacular API documentation
const MASHAPE_KEY = 'AyBmxPBKYUmshcuDOEgra2staJv9p1Tm8cgjsnsk5j9j5dONbK';


function getSearchResults(userQuery){
  let ajaxSettings = {
    url: 'https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/search',
    data: {
      query: userQuery,
      number: 25
    },
    dataType: 'json',
    headers: {
      'X-Mashape-Key': MASHAPE_KEY,
      Accept: 'application/json'
    }
  };
  return $.ajax(ajaxSettings);
}
function getRecipeDetails(id) {
  let ajaxSettings = {
    url: 'https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/'+id+'/information',
    data: {
      includeNutrition: false
    },
    dataType: 'json',
    headers: {
      'X-Mashape-Key': MASHAPE_KEY,
      Accept: 'application/json'
    }
  };
  return $.ajax(ajaxSettings);
}

const LOCAL_URL = "http://localhost/spoon-n-drop/build/pages/";

// jshint esversion:6
// See Dropbox APi v2 HTTP documentation
const CLIENT_ID = 'myj4y8uy5mlsg9s';
const REDIRECT_URI$1 = LOCAL_URL || 'https://cnsheafe.github.io/spoon-n-drop/build/';
const STORAGE_PATH = '/my-recipes.json';

function OAuth(){
  let url = 'https://www.dropbox.com/oauth2/authorize?'+
  'response_type=token&'+
  'client_id='+CLIENT_ID+'&'+
  'redirect_uri='+REDIRECT_URI$1;
  window.location.replace(url);
}
/*GET and param urls used to avoid CORS pre-flight*/
function getMyRecipes() {
  let ajaxSettings = {
    url: 'https://content.dropboxapi.com/2/files/download',
    method: 'GET',
    dataType: 'json',
    data: {
      authorization: 'Bearer '+ window.sessionStorage.getItem('accessToken'),
      arg: JSON.stringify({path: STORAGE_PATH}),
      reject_cors_preflight: true
    }
  };
  return $.ajax(ajaxSettings);
}

function deleteFileHelper() {
  let ajaxSettings = {
    url: 'https://api.dropboxapi.com/2/files/delete',
    method: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    data: JSON.stringify({path: STORAGE_PATH}),
    headers : {
      Authorization: 'Bearer '+window.sessionStorage.getItem('accessToken')
    }
  };
  return $.ajax(ajaxSettings);
}

function postMyRecipes(state) {
  let ajaxSettings = {
    url: 'https://content.dropboxapi.com/2/files/upload',
    method: 'POST',
    contentType: 'application/octet-stream',
    data: JSON.stringify(state.myRecipes),
    headers: {
      Authorization: 'Bearer '+window.sessionStorage.getItem('accessToken'),
      'Dropbox-API-Arg': JSON.stringify({path: STORAGE_PATH})
    }
  };
  return $.ajax(ajaxSettings);
}

// jshint esversion:6

function addRecipe() {
  let title = $('#recipe-title').val();
  let time = $('#ready-in-mins').val();
  let ingredients = []; //{name, amount}
  let $ingredientName;
  $('#ingredients').find('li').each(function (index,element) {
    ingredients.push({
      name: $(element).find('.ingredient-name').val(),
      amount: $(element).find('.ingredient-amount').val()
    });
  });

  let steps = [];
  $('#steps').find('input').each(
    (index, element) => steps.push($(element).val())
  );

  return {
    title: title,
    readyInMinutes: time,
    listofIngredients: ingredients,
    instructions: steps
  };
}

function newListItem($element, keyPressed) {
  if(keyPressed === 'Enter') {
    if ($element.hasClass('ingredient')) {
    $element.after(`
      <li class="ingredient input-group">
        <span class="col-xs-8 col-xs-offset-1">
				  <input type="text" class="ingredient-name form-control" placeholder="ingredient">
        </span>
        <span class="col-xs-3">
			     <input type="text" class="ingredient-amount form-control" placeholder="">
        <span>Amount</span>
        </span>
			</li>
    `);
    }
    else {
      $element.after(
        `<li class="col-xs-12">
            <input type="text" class="form-control" placeholder="First step">
          </li>`
      );
    }
  }
}

// jshint esversion:6
function storeResults(apiResult, state) {
  state.resultList = apiResult.results;
  state.sessionResults.push({
    currentQuery: state.currentQuery,
    baseUri: apiResult.baseUri
  });
  state.baseImgUri = apiResult.baseUri;
}

function simplifyRecipe(recipeObj) {
  /*Refer to 'get-recipe-info-sample-response.json' for recipeObj's complete structure*/
  let ingredients = [];
  $.each(recipeObj.extendedIngredients, function(ind, obj) {
    ingredients.push({
      name: obj.name,
      amount: obj.amount + obj.unitLong
    });
  });
  let steps = [];
  if (typeof recipeObj.analyzedInstructions[0] !== 'undefined') {
    $.each(recipeObj.analyzedInstructions[0].steps, function(ind, obj) {
      steps.push(obj.step);
    });
  }
  return {
    title: recipeObj.title,
    readyInMinutes: recipeObj.readyInMinutes,
    listofIngredients: ingredients,
    instructions: steps
  };
}

// jshint esversion:6

function showList(state) {
  const $myRecipes = $('#my-recipes-page');
  let html = '';

  $.each(state.myRecipes, function(index, recipeObj) {
    html += '<li class="my-recipe-list-item">' +
    '<h2>'+recipeObj.title+'</h2>'+
    '<div>' +'<span>'+recipeObj.readyInMinutes+' mins</span>'+
    '<button class="edit-recipe">Edit</button>'+
    '<button class="delete-recipe">Delete</button></li>';
  });
  $myRecipes.find('ul').html(html);

}

// jshint esversion:6
// Is used on more than one 'page'
function showRecipe($selector, recipe) {
  console.log(recipe);
  let recipeInfo =
    `<div class="recipe-header row">
      <div class="col-xs-8 col-xs-offset-2">
        <h2>${recipe.title}</h2>
        <span class="glyphicon glyphicon-time"></span>
        <span>${recipe.readyInMinutes}</span>
      </div>
    </div>
    <div class="row">
      <h3 class="col-xs-8 col-xs-offset-2">Ingredients</h3>
      <ul class="col-xs-8 col-xs-offset-2 input-group list-group">`;

  $.each(recipe.listofIngredients, function(ind, ingredient) {
    recipeInfo +=
      `<li class="list-group-item row">
        <input type="checkbox" class="col-xs-1">
        <span class="col-xs-10">
          ${ingredient.amount} ${ingredient.name}
        </span>
      </li>`;
  });
  recipeInfo +=
    `</ul></div>
    <div class="row">
      <h3 class="col-xs-8 col-xs-offset-2">Directions</h3>
      <ol class="col-xs-8 col-xs-offset-2 input-group list-group">`;
  $.each(recipe.instructions, function(ind,val) {
    recipeInfo +=
    `<li class="list-group-item row">
      <input type="checkbox" class="col-xs-1">
      <span class="col-xs-10">
        ${val}
      </span>
    </li>`;
  });
  recipeInfo += '</ol></div>';

  $selector.html(recipeInfo);
}

function switchView($pageView) {
  $('#search-page').addClass('hide');
  $('#new-recipe-page').addClass('hide');
  $('#my-recipes-page').addClass('hide');
  $('#single-recipe-page').addClass('hide');
  $pageView.removeClass('hide');
}

function switchActiveTab($tab) {
  $('#search-for-recipes').removeClass('active');
  $('#create-recipe').removeClass('active');
  $('#my-recipes').removeClass('active');
  $tab.addClass('active');
}

// jshint esversion: 6
function showSearchResults(state){
  let previewHtml = '';
  $.each(state.resultList, (ind, result) => {
    previewHtml +=
    `<li class="row" data-recipeid=${result.id}>
      <span class="col-xs-4 ">
        <img src=${state.baseImgUri}${result.image}
        class="img-responsive"
        alt="${result.title}"></img>
      </span>
      <span class="col-xs-8 result-preview">
        <h3>${result.title}</h3>
        <span class="glyphicon glyphicon-time"></span>
        <span>${result.readyInMinutes}</span>
      </span>
    </li>`;
  });
  $('#search-results').html(previewHtml);
}

//jshint esversion: 6
// Main controller file that handles all event handlers
// Using rollup for modules
// command "rollup -c"

const REDIRECT_URI = LOCAL_URL || 'https://cnsheafe.github.io/spoon-n-drop/build/';
console.log(REDIRECT_URI);
function initAppState() {
  return {
    sessionResults: [],
    currentQuery: '',
    resultList: [],
    myRecipes: [], //list of recipe objs
    loggedIn: false,
    currentRecipe: {}
  };
}
// Checks if user already has access token in session storage
function userHasAccessToken(token) {
  if(token !== 'undefined' && token !== null) {return true;}
  else {
    let redirectResponse = window.location.href.split('#')[1];
    if(typeof redirectResponse != 'undefined') {
      window.sessionStorage.setItem('accessToken', redirectResponse.split('&')[0].split('=')[1]);
      window.location.href(REDIRECT_URI);
      return true;
    }
    else {return false;}
  }
}

$(function main() {
  let appState = initAppState();
  let token = window.sessionStorage.getItem('accessToken');

  if(userHasAccessToken(token)) {
    appState.loggedIn = true;
    $('#login').find('h2').text('Logged In');
  }

  $('#login').on('click', () => { if(!appState.loggedIn) {OAuth();} });

  $('#search-for-recipes').on('click',function() {
    switchView($('#search-page'));
    switchActiveTab($(this));
  });

  $('#search-form').on('submit', function(event) {
    event.preventDefault();
    let query = $(this).find('#search-bar').val();
    getSearchResults(query).done(function (data) {
      storeResults(data, appState);
      showSearchResults(appState);
    });
  });

  $('#search-results').on('click','li', function() {
    let xhr = getRecipeDetails($(this).data('recipeid'));
    xhr.done( function (data) {
      const $recipePage = $('#single-recipe-page');
      switchView($recipePage);
      $('#add-to-my-recipes').removeClass('hide');
      appState.currentRecipe = simplifyRecipe(data);
      showRecipe($recipePage.find('.recipe-container'), appState.currentRecipe);
    });
  });

  $('#create-recipe').on('click', function () {
    switchView($('#new-recipe-page'));
    $('#add-to-my-recipes').removeClass('hide');
    switchActiveTab($(this));
  });

  $('#my-recipes').on('click', function () {
    if(appState.loggedIn) {
      getMyRecipes().then(
        data => {
          appState.myRecipes = data;
          console.log(appState.myRecipes);
          switchView($('#my-recipes-page'));
          switchActiveTab($(this));
          showList(appState);
        },
        jqxhr => console.log(jqxhr.responseText)
      );
    }
  });

  $('#my-recipes-page').on('click', '.my-recipe-list-item', function() {
    const position = $('#my-recipes-page').find('li').index($(this));
    switchView($('#single-recipe-page'));
    $('#add-to-my-recipes').addClass('hide');
    showRecipe(
      $('#single-recipe-page').find('.recipe-container'), appState.myRecipes[position]
    );
  });
  $('#my-recipes-page').on('click', '.edit-recipe', function() {
    const position = $('#my-recipes-page').find('.edit-recipe').index($(this));
    switchView($('#create-recipe-page'));
  });

  $('#my-recipes-page').on('click', '.delete-recipe', function (event) {
    event.stopPropagation();
    const index = $('.delete-recipe').index($(this));
    appState.myRecipes.splice(index,1);
    deleteFileHelper().always(
      data => postMyRecipes(appState).then(
        data => {console.log('Success');showList(appState);},
        jqxhr => console.log(jqxhr.responseText)
      )
    );
  });

  $('#new-recipe-page').find('form').on('click', 'button', function(event) {
    event.preventDefault();
    appState.myRecipes.push(addRecipe());

    deleteFileHelper().always(
      data => postMyRecipes(appState).then(
        data => $(this).text('Added to My Recipes'),
        jqxhr => console.log(jqxhr.responseText)
      )
    );
  });

  $('.create-list').on('keypress', 'li', function (event) {
    newListItem($(this), event.key);
    $(this).next().find('.ingredient-name').focus();
    console.log($(this));
    console.log($(this).next());
  });

  $('#single-recipe-page').on('click', '#add-to-my-recipes', function() {
    appState.myRecipes.push(appState.currentRecipe);
    console.log(appState.myRecipes);
    deleteFileHelper().always(
      data => postMyRecipes(appState).then(
        data => console.log('Success'),
        jqxhr => console.log(jqxhr.responseText)
      )
    );
    $(this).text('In My Recipes');
  });
});

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NjcmlwdHMvY29udHJvbGxlci9hcGkvc3Bvb25hY3VsYXIuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy8uY29uZmlnLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvY29udHJvbGxlci9hcGkvZHJvcGJveC5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL3ZpZXcvY3JlYXRlLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kZWwvc2VhcmNoLW1vZGVsLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvdmlldy9teS1yZWNpcGVzLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvdmlldy9yZW5kZXItZ2VuZXJpYy5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL3ZpZXcvc2VhcmNoLXJlc3VsdHMuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9jb250cm9sbGVyL2FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBqc2hpbnQgZXN2ZXJzaW9uOiA2XG4vLyBTZWUgU3Bvb25hY3VsYXIgQVBJIGRvY3VtZW50YXRpb25cbmNvbnN0IE1BU0hBUEVfS0VZID0gJ0F5Qm14UEJLWVVtc2hjdURPRWdyYTJzdGFKdjlwMVRtOGNnanNuc2s1ajlqNWRPTmJLJztcblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VhcmNoUmVzdWx0cyh1c2VyUXVlcnkpe1xuICBsZXQgYWpheFNldHRpbmdzID0ge1xuICAgIHVybDogJ2h0dHBzOi8vc3Bvb25hY3VsYXItcmVjaXBlLWZvb2QtbnV0cml0aW9uLXYxLnAubWFzaGFwZS5jb20vcmVjaXBlcy9zZWFyY2gnLFxuICAgIGRhdGE6IHtcbiAgICAgIHF1ZXJ5OiB1c2VyUXVlcnksXG4gICAgICBudW1iZXI6IDI1XG4gICAgfSxcbiAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdYLU1hc2hhcGUtS2V5JzogTUFTSEFQRV9LRVksXG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuICQuYWpheChhamF4U2V0dGluZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY2lwZURldGFpbHMoaWQpIHtcbiAgbGV0IGFqYXhTZXR0aW5ncyA9IHtcbiAgICB1cmw6ICdodHRwczovL3Nwb29uYWN1bGFyLXJlY2lwZS1mb29kLW51dHJpdGlvbi12MS5wLm1hc2hhcGUuY29tL3JlY2lwZXMvJytpZCsnL2luZm9ybWF0aW9uJyxcbiAgICBkYXRhOiB7XG4gICAgICBpbmNsdWRlTnV0cml0aW9uOiBmYWxzZVxuICAgIH0sXG4gICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnWC1NYXNoYXBlLUtleSc6IE1BU0hBUEVfS0VZLFxuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gIH07XG4gIHJldHVybiAkLmFqYXgoYWpheFNldHRpbmdzKTtcbn1cbiIsImV4cG9ydCBjb25zdCBMT0NBTF9VUkwgPSBcImh0dHA6Ly9sb2NhbGhvc3Qvc3Bvb24tbi1kcm9wL2J1aWxkL3BhZ2VzL1wiO1xuIiwiLy8ganNoaW50IGVzdmVyc2lvbjo2XG4vLyBTZWUgRHJvcGJveCBBUGkgdjIgSFRUUCBkb2N1bWVudGF0aW9uXG5jb25zdCBDTElFTlRfSUQgPSAnbXlqNHk4dXk1bWxzZzlzJztcbmltcG9ydCB7TE9DQUxfVVJMfSBmcm9tICcuLi8uLi8uY29uZmlnJztcbmNvbnN0IFJFRElSRUNUX1VSSSA9IExPQ0FMX1VSTCB8fCAnaHR0cHM6Ly9jbnNoZWFmZS5naXRodWIuaW8vc3Bvb24tbi1kcm9wL2J1aWxkLyc7XG5jb25zdCBTVE9SQUdFX1BBVEggPSAnL215LXJlY2lwZXMuanNvbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBPQXV0aCgpe1xuICBsZXQgdXJsID0gJ2h0dHBzOi8vd3d3LmRyb3Bib3guY29tL29hdXRoMi9hdXRob3JpemU/JytcbiAgJ3Jlc3BvbnNlX3R5cGU9dG9rZW4mJytcbiAgJ2NsaWVudF9pZD0nK0NMSUVOVF9JRCsnJicrXG4gICdyZWRpcmVjdF91cmk9JytSRURJUkVDVF9VUkk7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHVybCk7XG59XG4vKkdFVCBhbmQgcGFyYW0gdXJscyB1c2VkIHRvIGF2b2lkIENPUlMgcHJlLWZsaWdodCovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TXlSZWNpcGVzKCkge1xuICBsZXQgYWpheFNldHRpbmdzID0ge1xuICAgIHVybDogJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJyxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgZGF0YToge1xuICAgICAgYXV0aG9yaXphdGlvbjogJ0JlYXJlciAnKyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKSxcbiAgICAgIGFyZzogSlNPTi5zdHJpbmdpZnkoe3BhdGg6IFNUT1JBR0VfUEFUSH0pLFxuICAgICAgcmVqZWN0X2NvcnNfcHJlZmxpZ2h0OiB0cnVlXG4gICAgfVxuICB9O1xuICByZXR1cm4gJC5hamF4KGFqYXhTZXR0aW5ncyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVGaWxlSGVscGVyKCkge1xuICBsZXQgYWpheFNldHRpbmdzID0ge1xuICAgIHVybDogJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZGVsZXRlJyxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3BhdGg6IFNUT1JBR0VfUEFUSH0pLFxuICAgIGhlYWRlcnMgOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcrd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJylcbiAgICB9XG4gIH07XG4gIHJldHVybiAkLmFqYXgoYWpheFNldHRpbmdzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvc3RNeVJlY2lwZXMoc3RhdGUpIHtcbiAgbGV0IGFqYXhTZXR0aW5ncyA9IHtcbiAgICB1cmw6ICdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyxcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShzdGF0ZS5teVJlY2lwZXMpLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyt3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKSxcbiAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7cGF0aDogU1RPUkFHRV9QQVRIfSlcbiAgICB9XG4gIH07XG4gIHJldHVybiAkLmFqYXgoYWpheFNldHRpbmdzKTtcbn1cbiIsIi8vIGpzaGludCBlc3ZlcnNpb246NlxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUmVjaXBlKCkge1xuICBsZXQgdGl0bGUgPSAkKCcjcmVjaXBlLXRpdGxlJykudmFsKCk7XG4gIGxldCB0aW1lID0gJCgnI3JlYWR5LWluLW1pbnMnKS52YWwoKTtcbiAgbGV0IGluZ3JlZGllbnRzID0gW107IC8ve25hbWUsIGFtb3VudH1cbiAgbGV0ICRpbmdyZWRpZW50TmFtZTtcbiAgJCgnI2luZ3JlZGllbnRzJykuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxlbGVtZW50KSB7XG4gICAgaW5ncmVkaWVudHMucHVzaCh7XG4gICAgICBuYW1lOiAkKGVsZW1lbnQpLmZpbmQoJy5pbmdyZWRpZW50LW5hbWUnKS52YWwoKSxcbiAgICAgIGFtb3VudDogJChlbGVtZW50KS5maW5kKCcuaW5ncmVkaWVudC1hbW91bnQnKS52YWwoKVxuICAgIH0pO1xuICB9KTtcblxuICBsZXQgc3RlcHMgPSBbXTtcbiAgJCgnI3N0ZXBzJykuZmluZCgnaW5wdXQnKS5lYWNoKFxuICAgIChpbmRleCwgZWxlbWVudCkgPT4gc3RlcHMucHVzaCgkKGVsZW1lbnQpLnZhbCgpKVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGU6IHRpdGxlLFxuICAgIHJlYWR5SW5NaW51dGVzOiB0aW1lLFxuICAgIGxpc3RvZkluZ3JlZGllbnRzOiBpbmdyZWRpZW50cyxcbiAgICBpbnN0cnVjdGlvbnM6IHN0ZXBzXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdMaXN0SXRlbSgkZWxlbWVudCwga2V5UHJlc3NlZCkge1xuICBpZihrZXlQcmVzc2VkID09PSAnRW50ZXInKSB7XG4gICAgaWYgKCRlbGVtZW50Lmhhc0NsYXNzKCdpbmdyZWRpZW50JykpIHtcbiAgICAkZWxlbWVudC5hZnRlcihgXG4gICAgICA8bGkgY2xhc3M9XCJpbmdyZWRpZW50IGlucHV0LWdyb3VwXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY29sLXhzLTggY29sLXhzLW9mZnNldC0xXCI+XG5cdFx0XHRcdCAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbmdyZWRpZW50LW5hbWUgZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJpbmdyZWRpZW50XCI+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb2wteHMtM1wiPlxuXHRcdFx0ICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImluZ3JlZGllbnQtYW1vdW50IGZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiXCI+XG4gICAgICAgIDxzcGFuPkFtb3VudDwvc3Bhbj5cbiAgICAgICAgPC9zcGFuPlxuXHRcdFx0PC9saT5cbiAgICBgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAkZWxlbWVudC5hZnRlcihcbiAgICAgICAgYDxsaSBjbGFzcz1cImNvbC14cy0xMlwiPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkZpcnN0IHN0ZXBcIj5cbiAgICAgICAgICA8L2xpPmBcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iLCIvLyBqc2hpbnQgZXN2ZXJzaW9uOjZcbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVJlc3VsdHMoYXBpUmVzdWx0LCBzdGF0ZSkge1xuICBzdGF0ZS5yZXN1bHRMaXN0ID0gYXBpUmVzdWx0LnJlc3VsdHM7XG4gIHN0YXRlLnNlc3Npb25SZXN1bHRzLnB1c2goe1xuICAgIGN1cnJlbnRRdWVyeTogc3RhdGUuY3VycmVudFF1ZXJ5LFxuICAgIGJhc2VVcmk6IGFwaVJlc3VsdC5iYXNlVXJpXG4gIH0pO1xuICBzdGF0ZS5iYXNlSW1nVXJpID0gYXBpUmVzdWx0LmJhc2VVcmk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaW1wbGlmeVJlY2lwZShyZWNpcGVPYmopIHtcbiAgLypSZWZlciB0byAnZ2V0LXJlY2lwZS1pbmZvLXNhbXBsZS1yZXNwb25zZS5qc29uJyBmb3IgcmVjaXBlT2JqJ3MgY29tcGxldGUgc3RydWN0dXJlKi9cbiAgbGV0IGluZ3JlZGllbnRzID0gW107XG4gICQuZWFjaChyZWNpcGVPYmouZXh0ZW5kZWRJbmdyZWRpZW50cywgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICBpbmdyZWRpZW50cy5wdXNoKHtcbiAgICAgIG5hbWU6IG9iai5uYW1lLFxuICAgICAgYW1vdW50OiBvYmouYW1vdW50ICsgb2JqLnVuaXRMb25nXG4gICAgfSk7XG4gIH0pO1xuICBsZXQgc3RlcHMgPSBbXTtcbiAgaWYgKHR5cGVvZiByZWNpcGVPYmouYW5hbHl6ZWRJbnN0cnVjdGlvbnNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgJC5lYWNoKHJlY2lwZU9iai5hbmFseXplZEluc3RydWN0aW9uc1swXS5zdGVwcywgZnVuY3Rpb24oaW5kLCBvYmopIHtcbiAgICAgIHN0ZXBzLnB1c2gob2JqLnN0ZXApO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB7XG4gICAgdGl0bGU6IHJlY2lwZU9iai50aXRsZSxcbiAgICByZWFkeUluTWludXRlczogcmVjaXBlT2JqLnJlYWR5SW5NaW51dGVzLFxuICAgIGxpc3RvZkluZ3JlZGllbnRzOiBpbmdyZWRpZW50cyxcbiAgICBpbnN0cnVjdGlvbnM6IHN0ZXBzXG4gIH07XG59XG4iLCIvLyBqc2hpbnQgZXN2ZXJzaW9uOjZcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0KHN0YXRlKSB7XG4gIGNvbnN0ICRteVJlY2lwZXMgPSAkKCcjbXktcmVjaXBlcy1wYWdlJyk7XG4gIGxldCBodG1sID0gJyc7XG5cbiAgJC5lYWNoKHN0YXRlLm15UmVjaXBlcywgZnVuY3Rpb24oaW5kZXgsIHJlY2lwZU9iaikge1xuICAgIGh0bWwgKz0gJzxsaSBjbGFzcz1cIm15LXJlY2lwZS1saXN0LWl0ZW1cIj4nICtcbiAgICAnPGgyPicrcmVjaXBlT2JqLnRpdGxlKyc8L2gyPicrXG4gICAgJzxkaXY+JyArJzxzcGFuPicrcmVjaXBlT2JqLnJlYWR5SW5NaW51dGVzKycgbWluczwvc3Bhbj4nK1xuICAgICc8YnV0dG9uIGNsYXNzPVwiZWRpdC1yZWNpcGVcIj5FZGl0PC9idXR0b24+JytcbiAgICAnPGJ1dHRvbiBjbGFzcz1cImRlbGV0ZS1yZWNpcGVcIj5EZWxldGU8L2J1dHRvbj48L2xpPic7XG4gIH0pO1xuICAkbXlSZWNpcGVzLmZpbmQoJ3VsJykuaHRtbChodG1sKTtcblxufVxuIiwiLy8ganNoaW50IGVzdmVyc2lvbjo2XG4vLyBJcyB1c2VkIG9uIG1vcmUgdGhhbiBvbmUgJ3BhZ2UnXG5leHBvcnQgZnVuY3Rpb24gc2hvd1JlY2lwZSgkc2VsZWN0b3IsIHJlY2lwZSkge1xuICBjb25zb2xlLmxvZyhyZWNpcGUpO1xuICBsZXQgcmVjaXBlSW5mbyA9XG4gICAgYDxkaXYgY2xhc3M9XCJyZWNpcGUtaGVhZGVyIHJvd1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC14cy04IGNvbC14cy1vZmZzZXQtMlwiPlxuICAgICAgICA8aDI+JHtyZWNpcGUudGl0bGV9PC9oMj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRpbWVcIj48L3NwYW4+XG4gICAgICAgIDxzcGFuPiR7cmVjaXBlLnJlYWR5SW5NaW51dGVzfTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgIDxoMyBjbGFzcz1cImNvbC14cy04IGNvbC14cy1vZmZzZXQtMlwiPkluZ3JlZGllbnRzPC9oMz5cbiAgICAgIDx1bCBjbGFzcz1cImNvbC14cy04IGNvbC14cy1vZmZzZXQtMiBpbnB1dC1ncm91cCBsaXN0LWdyb3VwXCI+YDtcblxuICAkLmVhY2gocmVjaXBlLmxpc3RvZkluZ3JlZGllbnRzLCBmdW5jdGlvbihpbmQsIGluZ3JlZGllbnQpIHtcbiAgICByZWNpcGVJbmZvICs9XG4gICAgICBgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIHJvd1wiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJjb2wteHMtMVwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImNvbC14cy0xMFwiPlxuICAgICAgICAgICR7aW5ncmVkaWVudC5hbW91bnR9ICR7aW5ncmVkaWVudC5uYW1lfVxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L2xpPmA7XG4gIH0pO1xuICByZWNpcGVJbmZvICs9XG4gICAgYDwvdWw+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgPGgzIGNsYXNzPVwiY29sLXhzLTggY29sLXhzLW9mZnNldC0yXCI+RGlyZWN0aW9uczwvaDM+XG4gICAgICA8b2wgY2xhc3M9XCJjb2wteHMtOCBjb2wteHMtb2Zmc2V0LTIgaW5wdXQtZ3JvdXAgbGlzdC1ncm91cFwiPmA7XG4gICQuZWFjaChyZWNpcGUuaW5zdHJ1Y3Rpb25zLCBmdW5jdGlvbihpbmQsdmFsKSB7XG4gICAgcmVjaXBlSW5mbyArPVxuICAgIGA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gcm93XCI+XG4gICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJjb2wteHMtMVwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJjb2wteHMtMTBcIj5cbiAgICAgICAgJHt2YWx9XG4gICAgICA8L3NwYW4+XG4gICAgPC9saT5gO1xuICB9KTtcbiAgcmVjaXBlSW5mbyArPSAnPC9vbD48L2Rpdj4nO1xuXG4gICRzZWxlY3Rvci5odG1sKHJlY2lwZUluZm8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3dpdGNoVmlldygkcGFnZVZpZXcpIHtcbiAgJCgnI3NlYXJjaC1wYWdlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgJCgnI25ldy1yZWNpcGUtcGFnZScpLmFkZENsYXNzKCdoaWRlJyk7XG4gICQoJyNteS1yZWNpcGVzLXBhZ2UnKS5hZGRDbGFzcygnaGlkZScpO1xuICAkKCcjc2luZ2xlLXJlY2lwZS1wYWdlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgJHBhZ2VWaWV3LnJlbW92ZUNsYXNzKCdoaWRlJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzd2l0Y2hBY3RpdmVUYWIoJHRhYikge1xuICAkKCcjc2VhcmNoLWZvci1yZWNpcGVzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAkKCcjY3JlYXRlLXJlY2lwZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgJCgnI215LXJlY2lwZXMnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICR0YWIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xufVxuIiwiLy8ganNoaW50IGVzdmVyc2lvbjogNlxuZXhwb3J0IGZ1bmN0aW9uIHNob3dTZWFyY2hSZXN1bHRzKHN0YXRlKXtcbiAgbGV0IHByZXZpZXdIdG1sID0gJyc7XG4gICQuZWFjaChzdGF0ZS5yZXN1bHRMaXN0LCAoaW5kLCByZXN1bHQpID0+IHtcbiAgICBwcmV2aWV3SHRtbCArPVxuICAgIGA8bGkgY2xhc3M9XCJyb3dcIiBkYXRhLXJlY2lwZWlkPSR7cmVzdWx0LmlkfT5cbiAgICAgIDxzcGFuIGNsYXNzPVwiY29sLXhzLTQgXCI+XG4gICAgICAgIDxpbWcgc3JjPSR7c3RhdGUuYmFzZUltZ1VyaX0ke3Jlc3VsdC5pbWFnZX1cbiAgICAgICAgY2xhc3M9XCJpbWctcmVzcG9uc2l2ZVwiXG4gICAgICAgIGFsdD1cIiR7cmVzdWx0LnRpdGxlfVwiPjwvaW1nPlxuICAgICAgPC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJjb2wteHMtOCByZXN1bHQtcHJldmlld1wiPlxuICAgICAgICA8aDM+JHtyZXN1bHQudGl0bGV9PC9oMz5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXRpbWVcIj48L3NwYW4+XG4gICAgICAgIDxzcGFuPiR7cmVzdWx0LnJlYWR5SW5NaW51dGVzfTwvc3Bhbj5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2xpPmA7XG4gIH0pO1xuICAkKCcjc2VhcmNoLXJlc3VsdHMnKS5odG1sKHByZXZpZXdIdG1sKTtcbn1cbiIsIi8vanNoaW50IGVzdmVyc2lvbjogNlxuLy8gTWFpbiBjb250cm9sbGVyIGZpbGUgdGhhdCBoYW5kbGVzIGFsbCBldmVudCBoYW5kbGVyc1xuLy8gVXNpbmcgcm9sbHVwIGZvciBtb2R1bGVzXG4vLyBjb21tYW5kIFwicm9sbHVwIC1jXCJcblxuaW1wb3J0ICogYXMgcmVjaXBlIGZyb20gJy4vYXBpL3Nwb29uYWN1bGFyJztcbmltcG9ydCAqIGFzIGRyb3Bib3ggZnJvbSAnLi9hcGkvZHJvcGJveCc7XG5pbXBvcnQgKiBhcyBjcmVhdGUgZnJvbSAnLi4vdmlldy9jcmVhdGUnO1xuaW1wb3J0ICogYXMgc2VhcmNoIGZyb20gJy4uL21vZGVsL3NlYXJjaC1tb2RlbCc7XG5pbXBvcnQgKiBhcyBteV9yZWNpcGVzIGZyb20gJy4uL3ZpZXcvbXktcmVjaXBlcyc7XG5pbXBvcnQgKiBhcyByZW5kZXIgZnJvbSAnLi4vdmlldy9yZW5kZXItZ2VuZXJpYyc7XG5pbXBvcnQge3Nob3dTZWFyY2hSZXN1bHRzfSBmcm9tICcuLi92aWV3L3NlYXJjaC1yZXN1bHRzJztcbmltcG9ydCB7TE9DQUxfVVJMfSBmcm9tICcuLi8uY29uZmlnJztcbmNvbnN0IFJFRElSRUNUX1VSSSA9IExPQ0FMX1VSTCB8fCAnaHR0cHM6Ly9jbnNoZWFmZS5naXRodWIuaW8vc3Bvb24tbi1kcm9wL2J1aWxkLyc7XG5jb25zb2xlLmxvZyhSRURJUkVDVF9VUkkpO1xuZnVuY3Rpb24gaW5pdEFwcFN0YXRlKCkge1xuICByZXR1cm4ge1xuICAgIHNlc3Npb25SZXN1bHRzOiBbXSxcbiAgICBjdXJyZW50UXVlcnk6ICcnLFxuICAgIHJlc3VsdExpc3Q6IFtdLFxuICAgIG15UmVjaXBlczogW10sIC8vbGlzdCBvZiByZWNpcGUgb2Jqc1xuICAgIGxvZ2dlZEluOiBmYWxzZSxcbiAgICBjdXJyZW50UmVjaXBlOiB7fVxuICB9O1xufVxuLy8gQ2hlY2tzIGlmIHVzZXIgYWxyZWFkeSBoYXMgYWNjZXNzIHRva2VuIGluIHNlc3Npb24gc3RvcmFnZVxuZnVuY3Rpb24gdXNlckhhc0FjY2Vzc1Rva2VuKHRva2VuKSB7XG4gIGlmKHRva2VuICE9PSAndW5kZWZpbmVkJyAmJiB0b2tlbiAhPT0gbnVsbCkge3JldHVybiB0cnVlO31cbiAgZWxzZSB7XG4gICAgbGV0IHJlZGlyZWN0UmVzcG9uc2UgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzFdO1xuICAgIGlmKHR5cGVvZiByZWRpcmVjdFJlc3BvbnNlICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCByZWRpcmVjdFJlc3BvbnNlLnNwbGl0KCcmJylbMF0uc3BsaXQoJz0nKVsxXSk7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZihSRURJUkVDVF9VUkkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge3JldHVybiBmYWxzZTt9XG4gIH1cbn1cblxuJChmdW5jdGlvbiBtYWluKCkge1xuICBsZXQgYXBwU3RhdGUgPSBpbml0QXBwU3RhdGUoKTtcbiAgbGV0IHRva2VuID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG5cbiAgaWYodXNlckhhc0FjY2Vzc1Rva2VuKHRva2VuKSkge1xuICAgIGFwcFN0YXRlLmxvZ2dlZEluID0gdHJ1ZTtcbiAgICAkKCcjbG9naW4nKS5maW5kKCdoMicpLnRleHQoJ0xvZ2dlZCBJbicpO1xuICB9XG5cbiAgJCgnI2xvZ2luJykub24oJ2NsaWNrJywgKCkgPT4geyBpZighYXBwU3RhdGUubG9nZ2VkSW4pIHtkcm9wYm94Lk9BdXRoKCk7fSB9KTtcblxuICAkKCcjc2VhcmNoLWZvci1yZWNpcGVzJykub24oJ2NsaWNrJyxmdW5jdGlvbigpIHtcbiAgICByZW5kZXIuc3dpdGNoVmlldygkKCcjc2VhcmNoLXBhZ2UnKSk7XG4gICAgcmVuZGVyLnN3aXRjaEFjdGl2ZVRhYigkKHRoaXMpKTtcbiAgfSk7XG5cbiAgJCgnI3NlYXJjaC1mb3JtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgcXVlcnkgPSAkKHRoaXMpLmZpbmQoJyNzZWFyY2gtYmFyJykudmFsKCk7XG4gICAgcmVjaXBlLmdldFNlYXJjaFJlc3VsdHMocXVlcnkpLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHNlYXJjaC5zdG9yZVJlc3VsdHMoZGF0YSwgYXBwU3RhdGUpO1xuICAgICAgc2hvd1NlYXJjaFJlc3VsdHMoYXBwU3RhdGUpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcjc2VhcmNoLXJlc3VsdHMnKS5vbignY2xpY2snLCdsaScsIGZ1bmN0aW9uKCkge1xuICAgIGxldCB4aHIgPSByZWNpcGUuZ2V0UmVjaXBlRGV0YWlscygkKHRoaXMpLmRhdGEoJ3JlY2lwZWlkJykpO1xuICAgIHhoci5kb25lKCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgY29uc3QgJHJlY2lwZVBhZ2UgPSAkKCcjc2luZ2xlLXJlY2lwZS1wYWdlJyk7XG4gICAgICByZW5kZXIuc3dpdGNoVmlldygkcmVjaXBlUGFnZSk7XG4gICAgICAkKCcjYWRkLXRvLW15LXJlY2lwZXMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgYXBwU3RhdGUuY3VycmVudFJlY2lwZSA9IHNlYXJjaC5zaW1wbGlmeVJlY2lwZShkYXRhKTtcbiAgICAgIHJlbmRlci5zaG93UmVjaXBlKCRyZWNpcGVQYWdlLmZpbmQoJy5yZWNpcGUtY29udGFpbmVyJyksIGFwcFN0YXRlLmN1cnJlbnRSZWNpcGUpO1xuICAgIH0pO1xuICB9KTtcblxuICAkKCcjY3JlYXRlLXJlY2lwZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICByZW5kZXIuc3dpdGNoVmlldygkKCcjbmV3LXJlY2lwZS1wYWdlJykpO1xuICAgICQoJyNhZGQtdG8tbXktcmVjaXBlcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgcmVuZGVyLnN3aXRjaEFjdGl2ZVRhYigkKHRoaXMpKTtcbiAgfSk7XG5cbiAgJCgnI215LXJlY2lwZXMnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYoYXBwU3RhdGUubG9nZ2VkSW4pIHtcbiAgICAgIGRyb3Bib3guZ2V0TXlSZWNpcGVzKCkudGhlbihcbiAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgYXBwU3RhdGUubXlSZWNpcGVzID0gZGF0YTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhhcHBTdGF0ZS5teVJlY2lwZXMpO1xuICAgICAgICAgIHJlbmRlci5zd2l0Y2hWaWV3KCQoJyNteS1yZWNpcGVzLXBhZ2UnKSk7XG4gICAgICAgICAgcmVuZGVyLnN3aXRjaEFjdGl2ZVRhYigkKHRoaXMpKTtcbiAgICAgICAgICBteV9yZWNpcGVzLnNob3dMaXN0KGFwcFN0YXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAganF4aHIgPT4gY29uc29sZS5sb2coanF4aHIucmVzcG9uc2VUZXh0KVxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJyNteS1yZWNpcGVzLXBhZ2UnKS5vbignY2xpY2snLCAnLm15LXJlY2lwZS1saXN0LWl0ZW0nLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9ICQoJyNteS1yZWNpcGVzLXBhZ2UnKS5maW5kKCdsaScpLmluZGV4KCQodGhpcykpO1xuICAgIHJlbmRlci5zd2l0Y2hWaWV3KCQoJyNzaW5nbGUtcmVjaXBlLXBhZ2UnKSk7XG4gICAgJCgnI2FkZC10by1teS1yZWNpcGVzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICByZW5kZXIuc2hvd1JlY2lwZShcbiAgICAgICQoJyNzaW5nbGUtcmVjaXBlLXBhZ2UnKS5maW5kKCcucmVjaXBlLWNvbnRhaW5lcicpLCBhcHBTdGF0ZS5teVJlY2lwZXNbcG9zaXRpb25dXG4gICAgKTtcbiAgfSk7XG4gICQoJyNteS1yZWNpcGVzLXBhZ2UnKS5vbignY2xpY2snLCAnLmVkaXQtcmVjaXBlJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgcG9zaXRpb24gPSAkKCcjbXktcmVjaXBlcy1wYWdlJykuZmluZCgnLmVkaXQtcmVjaXBlJykuaW5kZXgoJCh0aGlzKSk7XG4gICAgcmVuZGVyLnN3aXRjaFZpZXcoJCgnI2NyZWF0ZS1yZWNpcGUtcGFnZScpKTtcbiAgfSk7XG5cbiAgJCgnI215LXJlY2lwZXMtcGFnZScpLm9uKCdjbGljaycsICcuZGVsZXRlLXJlY2lwZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IGluZGV4ID0gJCgnLmRlbGV0ZS1yZWNpcGUnKS5pbmRleCgkKHRoaXMpKTtcbiAgICBhcHBTdGF0ZS5teVJlY2lwZXMuc3BsaWNlKGluZGV4LDEpO1xuICAgIGRyb3Bib3guZGVsZXRlRmlsZUhlbHBlcigpLmFsd2F5cyhcbiAgICAgIGRhdGEgPT4gZHJvcGJveC5wb3N0TXlSZWNpcGVzKGFwcFN0YXRlKS50aGVuKFxuICAgICAgICBkYXRhID0+IHtjb25zb2xlLmxvZygnU3VjY2VzcycpO215X3JlY2lwZXMuc2hvd0xpc3QoYXBwU3RhdGUpO30sXG4gICAgICAgIGpxeGhyID0+IGNvbnNvbGUubG9nKGpxeGhyLnJlc3BvbnNlVGV4dClcbiAgICAgIClcbiAgICApO1xuICB9KTtcblxuICAkKCcjbmV3LXJlY2lwZS1wYWdlJykuZmluZCgnZm9ybScpLm9uKCdjbGljaycsICdidXR0b24nLCBmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgYXBwU3RhdGUubXlSZWNpcGVzLnB1c2goY3JlYXRlLmFkZFJlY2lwZSgpKTtcblxuICAgIGRyb3Bib3guZGVsZXRlRmlsZUhlbHBlcigpLmFsd2F5cyhcbiAgICAgIGRhdGEgPT4gZHJvcGJveC5wb3N0TXlSZWNpcGVzKGFwcFN0YXRlKS50aGVuKFxuICAgICAgICBkYXRhID0+ICQodGhpcykudGV4dCgnQWRkZWQgdG8gTXkgUmVjaXBlcycpLFxuICAgICAgICBqcXhociA9PiBjb25zb2xlLmxvZyhqcXhoci5yZXNwb25zZVRleHQpXG4gICAgICApXG4gICAgKTtcbiAgfSk7XG5cbiAgJCgnLmNyZWF0ZS1saXN0Jykub24oJ2tleXByZXNzJywgJ2xpJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY3JlYXRlLm5ld0xpc3RJdGVtKCQodGhpcyksIGV2ZW50LmtleSk7XG4gICAgJCh0aGlzKS5uZXh0KCkuZmluZCgnLmluZ3JlZGllbnQtbmFtZScpLmZvY3VzKCk7XG4gICAgY29uc29sZS5sb2coJCh0aGlzKSk7XG4gICAgY29uc29sZS5sb2coJCh0aGlzKS5uZXh0KCkpO1xuICB9KTtcblxuICAkKCcjc2luZ2xlLXJlY2lwZS1wYWdlJykub24oJ2NsaWNrJywgJyNhZGQtdG8tbXktcmVjaXBlcycsIGZ1bmN0aW9uKCkge1xuICAgIGFwcFN0YXRlLm15UmVjaXBlcy5wdXNoKGFwcFN0YXRlLmN1cnJlbnRSZWNpcGUpO1xuICAgIGNvbnNvbGUubG9nKGFwcFN0YXRlLm15UmVjaXBlcyk7XG4gICAgZHJvcGJveC5kZWxldGVGaWxlSGVscGVyKCkuYWx3YXlzKFxuICAgICAgZGF0YSA9PiBkcm9wYm94LnBvc3RNeVJlY2lwZXMoYXBwU3RhdGUpLnRoZW4oXG4gICAgICAgIGRhdGEgPT4gY29uc29sZS5sb2coJ1N1Y2Nlc3MnKSxcbiAgICAgICAganF4aHIgPT4gY29uc29sZS5sb2coanF4aHIucmVzcG9uc2VUZXh0KVxuICAgICAgKVxuICAgICk7XG4gICAgJCh0aGlzKS50ZXh0KCdJbiBNeSBSZWNpcGVzJyk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiUkVESVJFQ1RfVVJJIiwiZHJvcGJveC5PQXV0aCIsInJlbmRlci5zd2l0Y2hWaWV3IiwicmVuZGVyLnN3aXRjaEFjdGl2ZVRhYiIsInJlY2lwZS5nZXRTZWFyY2hSZXN1bHRzIiwic2VhcmNoLnN0b3JlUmVzdWx0cyIsInJlY2lwZS5nZXRSZWNpcGVEZXRhaWxzIiwic2VhcmNoLnNpbXBsaWZ5UmVjaXBlIiwicmVuZGVyLnNob3dSZWNpcGUiLCJkcm9wYm94LmdldE15UmVjaXBlcyIsIm15X3JlY2lwZXMuc2hvd0xpc3QiLCJkcm9wYm94LmRlbGV0ZUZpbGVIZWxwZXIiLCJkcm9wYm94LnBvc3RNeVJlY2lwZXMiLCJjcmVhdGUuYWRkUmVjaXBlIiwiY3JlYXRlLm5ld0xpc3RJdGVtIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTs7QUFFQSxNQUFNLFdBQVcsR0FBRyxvREFBb0QsQ0FBQzs7O0FBR3pFLEFBQU8sU0FBUyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUM7RUFDekMsSUFBSSxZQUFZLEdBQUc7SUFDakIsR0FBRyxFQUFFLDJFQUEyRTtJQUNoRixJQUFJLEVBQUU7TUFDSixLQUFLLEVBQUUsU0FBUztNQUNoQixNQUFNLEVBQUUsRUFBRTtLQUNYO0lBQ0QsUUFBUSxFQUFFLE1BQU07SUFDaEIsT0FBTyxFQUFFO01BQ1AsZUFBZSxFQUFFLFdBQVc7TUFDNUIs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
